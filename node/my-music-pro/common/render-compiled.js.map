{"version":3,"sources":["render.js"],"names":[],"mappings":"AAAA;;AAEA,MAAM,KAAK,QAAQ,IAAR,CAAL;AACN,MAAM,OAAO,QAAQ,MAAR,CAAP;AACN,MAAM,IAAM,QAAQ,YAAR,CAAN;;AAEN,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe;AAC9B,MAAI,MAAJ,GAAa,UAAU,QAAV,EAAoB,OAApB,EAA6B;AACxC,OAAG,QAAH,CAAY,aAAW,QAAX,GAAoB,OAApB,EAA6B,MAAzC,EAAiD,UAAU,GAAV,EAAe,IAAf,EAAqB;AACpE,UAAI,GAAJ,EAAS;AACP,eAAO,IAAI,GAAJ,CAAQ,IAAI,OAAJ,CAAf,CADO;OAAT;;AAIA,UAAI,WAAW,EAAE,QAAF,CAAW,IAAX,CAAX,CALgE;;AAOpE,UAAI,UAAU,SAAS,OAAT,CAAV;;;AAPgE,SAUpE,CAAI,SAAJ,CAAc,GAAd,EAAmB;AACjB,wBAAgB,WAAhB;OADF,EAVoE;;AAcpE,UAAI,GAAJ,CAAQ,OAAR,EAdoE;KAArB,CAAjD,CADwC;GAA7B,CADiB;CAAf","file":"render-compiled.js","sourcesContent":["\"use strict\";\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\nconst _   = require('underscore');\r\n\r\nmodule.exports = function (res) {\r\n  res.render = function (viewName, dataObj) {\r\n    fs.readFile('./views/'+viewName+'.html', 'utf8', function (err, data) {\r\n      if (err) {\r\n        return res.end(err.message);\r\n      }\r\n\r\n      let compiled = _.template(data);\r\n\r\n      let htmlStr = compiled(dataObj);\r\n\r\n      // 将完整的html字符串响应给客户端\r\n      res.writeHead(200, {\r\n        'Content-Type': 'text/html'\r\n      });\r\n\r\n      res.end(htmlStr);\r\n    });\r\n  }\r\n};\r\n"]}