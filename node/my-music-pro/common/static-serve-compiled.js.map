{"version":3,"sources":["static-serve.js"],"names":[],"mappings":"AAAA;;AAEA,MAAM,KAAK,QAAQ,IAAR,CAAL;AACN,MAAM,MAAM,QAAQ,KAAR,CAAN;AACN,MAAM,OAAO,QAAQ,MAAR,CAAP;AACN,MAAM,OAAO,QAAQ,MAAR,CAAP;;AAEN,OAAO,OAAP,GAAiB,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;AACzC,MAAI,WAAW,IAAI,KAAJ,CAAU,IAAI,GAAJ,CAAV,CAAmB,QAAnB,CAD0B;AAEzC,MAAI,SAAS,UAAT,CAAoB,OAApB,CAAJ,EAAkC;;;AAGhC,QAAI,WAAW,MAAM,IAAI,GAAJ,CAHW;AAIhC,OAAG,QAAH,CAAY,QAAZ,EAAsB,UAAU,GAAV,EAAe,IAAf,EAAqB;AACzC,UAAI,GAAJ,EAAS;AACP,YAAI,SAAJ,CAAc,GAAd,EAAmB;AACjB,0BAAgB,2BAAhB;SADF,EADO;AAIP,eAAO,IAAI,GAAJ,CAAQ,sBAAR,CAAP,CAJO;OAAT;AAMA,UAAI,WAAW,KAAK,MAAL,CAAY,QAAZ,CAAX,CAPqC;;AASzC,UAAI,SAAS,UAAT,CAAoB,OAApB,CAAJ,EAAkC;AAChC,oBAAY,iBAAZ,CADgC;OAAlC;AAGA,UAAI,SAAJ,CAAc,GAAd,EAAmB;AACjB,wBAAgB,QAAhB;OADF,EAZyC;AAezC,UAAI,GAAJ,CAAQ,IAAR,EAfyC;KAArB,CAAtB,CAJgC;GAAlC,MAqBO;AACL,WADK;GArBP;CAFe","file":"static-serve-compiled.js","sourcesContent":["\"use strict\";\r\n\r\nconst fs = require('fs');\r\nconst url = require('url');\r\nconst path = require('path');\r\nconst mime = require('mime');\r\n\r\nmodule.exports = function (req, res, next) {\r\n  let pathname = url.parse(req.url).pathname;\r\n  if (pathname.startsWith('/www/')) {\r\n    // /www/img/1.jpg\r\n    // ./www/img/1.jpg\r\n    let fullPath = '.' + req.url;\r\n    fs.readFile(fullPath, function (err, data) {\r\n      if (err) {\r\n        res.writeHead(404, {\r\n          'Content-Type': 'text/plain; charset=utf-8'\r\n        });\r\n        return res.end('对不起，您所请求的资源找不到了。。^_^');\r\n      }\r\n      let mimeType = mime.lookup(fullPath);\r\n\r\n      if (mimeType.startsWith('text/')) {\r\n        mimeType += '; charset=utf-8';\r\n      }\r\n      res.writeHead(200, {\r\n        'Content-Type': mimeType\r\n      });\r\n      res.end(data);\r\n    });\r\n  } else {\r\n    next();\r\n  }\r\n};\r\n\r\n// 我们需要静态资源路径是可配置的\r\n\r\n// staticPath 支持两种参数方式，一种是绝对路径、一种是名字（这个名字就是当前网站根路径下的一个目录名称）\r\n// www\r\n// /www/vender/jquery/dist/jquery.js\r\n// /www/vender/artTemplate/dist/template.js\r\n// /www/img/1.jpg\r\n\r\n// 一般来说，我们统一规定，将静态资源放到一个单独的目录中，专门存储静态资源\r\n// 一般也就是css、js、img、第三方库\r\n"]}