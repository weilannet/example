{"version":3,"sources":["index.js"],"names":[],"mappings":"AAAA;;;;;AAKA,MAAM,KAAK,QAAQ,IAAR,CAAL;AACN,MAAM,OAAO,QAAQ,MAAR,CAAP;;AAEN,QAAQ,SAAR,GAAoB,UAAU,GAAV,EAAe,GAAf,EAAoB,IAApB,EAA0B;;AAE5C,MAAI,UAAU,IAAI,GAAJ,CAAQ,MAAR,CAAe,OAAf,CAF8B;;AAI5C,KAAG,OAAH,CAAW,OAAX,EAAoB,UAAU,GAAV,EAAe,KAAf,EAAsB;AACxC,QAAI,GAAJ,EAAS;AACP,aAAO,KAAK,GAAL,CAAP,CADO;KAAT;AAGA,QAAI,aAAa,EAAb,CAJoC;AAKxC,UAAM,OAAN,CAAc,UAAU,IAAV,EAAgB;AAC5B,UAAI,GAAG,QAAH,CAAY,KAAK,IAAL,CAAU,OAAV,EAAmB,IAAnB,CAAZ,EAAsC,WAAtC,EAAJ,EAAyD;AACvD,mBAAW,IAAX,CAAgB,IAAhB,EADuD;OAAzD;KADY,CAAd,CALwC;;AAWxC,QAAI,MAAJ,CAAW,OAAX,EAAoB;AAClB,kBAAY,UAAZ;KADF,EAXwC;GAAtB,CAApB,CAJ4C;CAA1B","file":"index-compiled.js","sourcesContent":["\"use strict\";\r\n/*\r\n * 当前页面是相关于首页的一些处理逻辑\r\n * */\r\n\r\nconst fs = require('fs');\r\nconst path = require('path');\r\n\r\nexports.showIndex = function (req, res, next) {\r\n  // 拿到之前通过中间件挂载的 一个根目录名称\r\n  let rootDir = req.app.locals.rootDir;\r\n\r\n  fs.readdir(rootDir, function (err, files) {\r\n    if (err) {\r\n      return next(err);\r\n    }\r\n    let albumNames = [];\r\n    files.forEach(function (item) {\r\n      if (fs.statSync(path.join(rootDir, item)).isDirectory()) {\r\n        albumNames.push(item);\r\n      } \r\n    });\r\n\r\n    res.render('index', {\r\n      albumNames: albumNames\r\n    });\r\n  });\r\n};\r\n"]}